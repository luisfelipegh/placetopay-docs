export const apiRefs = ['/api/query']

## Consultar un AutoPago {{ id: 'query-autopay', tag: 'POST', label: '/api/query' }}
Este endpoint permite consultar el estado e información actualizada relacionada con el autopago.

<Row>
    <Col>
        <ApiReader
            path="/api/query"
            method="POST"
            api={props.refs}
        />
    </Col>
    <Col sticky>
        <br />
        <CodeGroup title="Solicitud" tag="POST" label="/api/query">
            ```bash {{ title: 'General' }}
            curl -X "POST" {{baseURl}}/api/query \
            -H "Content-Type: application/json" \
            -d '{
                "auth": {
                    "login":"aabbccdd1234567890aabbccdd123456",
                    "tranKey":"ABC123example456trankey+789abc012def3456ABC=",
                    "nonce":"enQ4dXh3YWhkMWM=",
                    "seed":"2023-06-21T09:56:06-05:00"
                },
                "id": "ac1cc9ce-83fe-42d7-9708-f6dd5461c89e",
            }'
            ```
        </CodeGroup>
    </Col>
</Row>

<Row>
    <Col>
        <ApiReader
            path="/api/query"
            method="POST"
            type="response"
            api={props.refs}
        />
    </Col>
    <Col sticky>
        <br />
        <CodeGroup title="Respuesta">
            ```json {{ title: '200: Autopago pendiente de aceptación' }}
            {
                "status": {
                    "status": "OK",
                    "reason": "00",
                    "description": "La petición se ha procesado correctamente",
                    "date":"2023-06-21T09:56:06-05:00"
                },
                "data": {
                    "id": "328eb09a-363f-48a6-a16e-51c5a58b89ec",
                    "status": "PENDING",
                    "chargeType": null,
                    "reference": "12345",
                    "description": "Ejemplo de descripción",
                    "ipAddress": "127.0.0.1",
                    "acceptedAt": null,
                    "createdAt": "2021-09-24T10:02:17-05:00",
                    "payer": null,
                    "recurring": {
                        "periodicity": "D",
                        "interval": "1",
                        "nextPayment": "2025-08-24",
                        "maxPeriods": 1,
                        "dueDate ": "2025-12-24",
                        "notificationUrl ": "https://checkout.placetopay.com"
                    },
                    "additional": {
                        "processUrl": "https://checkout-co.placetopay.com/session/1/cc9b8690b1f7228c78b759ce27d7e80a"
                    },
                    "transactions": []
                }
            }
            ```
            ```json {{ title: '200: Monto fijo' }}
            {
                "status": {
                    "status": "OK",
                    "reason": "00",
                    "description": "La petición se ha procesado correctamente",
                    "date":"2023-06-21T09:56:06-05:00"
               },
               "data": {
                   "id": "328eb09a-363f-48a6-a16e-51c5a58b89ec",
                   "status": "ACTIVE",
                   "chargeType": "FIXED_AMOUNT",
                   "reference": "12345",
                   "description": "Ejemplo de descripción",
                   "amount": {
                     "currency": "USD",
                     "total": 10
                   },
                   "ipAddress": "127.0.0.1",
                   "acceptedAt": "2021-09-24T10:02:17-05:00",
                   "createdAt": "2021-09-24T10:02:17-05:00",
                   "payer": {
                        "document": "911111111",
                        "documentType": "CC",
                        "name": "john",
                        "surname": "doe",
                        "email": "john@doe.com",
                        "mobile": "+573111111111"
                  },
                  "recurring": {
                    "periodicity": "D",
                    "interval": "1",
                    "nextPayment": "2025-08-24",
                    "maxPeriods": 1,
                    "dueDate ": "2025-12-24",
                    "notificationUrl ": "https://checkout.placetopay.com"
                  },
                "additional": {
                    "franchise": "visa",
                    "lastDigits": "0008",
                    "bin": "411111",
                    "processUrl": "https://checkout-co.placetopay.com/session/1/cc9b8690b1f7228c78b759ce27d7e80a"
                },
                "transactions": [
                 {
                     "status": {
                        "status": "APPROVED",
                        "reason": "00",
                        "message": "La petición ha sido aprobada exitosamente",
                        "date": "2022-07-27T14:51:27-05:00"
                    },
                    "internalReference": 12345,
                    "reference": "12345",
                    "paymentMethod": "visa",
                    "paymentMethodName": "Visa",
                    "issuerName": "JPMORGAN CHASE BANK, N.A.",
                    "amount": {
                        "from": {
                            "currency ": "COP",
                            "total ": 10000
                        },
                        "to": {
                            "currency ": "COP",
                            "total ": 10000
                        },
                        "factor": 1
                    },
                    "receipt": "052617800175",
                    "franchise": "PS_VS",
                    "refunded": false,
                    "authorization": "965960",
                    "processorFields": [
                        {
                            "keyword": "1111",
                            "value": "lastDigits",
                            "displayOn": "none"
                        }
                    ],
                    "dispersion": null,
                    "agreement": null,
                    "agreementType": null,
                    "discount": {
                        "base": 3000,
                        "code": "17934",
                        "type": "FRANCHISE",
                        "amount": 1000
                    },
                    "subscription": null
                },
                {
                     "status": {
                        "status": "APPROVED",
                        "reason": "00",
                        "message": "La petición ha sido aprobada exitosamente",
                        "date": "2022-07-27T14:51:27-05:00"
                    },
                    "internalReference": 12345,
                    "reference": "12345",
                    "paymentMethod": "visa",
                    "paymentMethodName": "Visa",
                    "issuerName": "JPMORGAN CHASE BANK, N.A.",
                    "amount": {
                        "from": {
                            "currency ": "COP",
                            "total ": 10000
                        },
                        "to": {
                            "currency ": "COP",
                            "total ": 10000
                        },
                        "factor": 1
                    },
                    "receipt": "052617800175",
                    "franchise": "PS_VS",
                    "refunded": false,
                    "authorization": "965960",
                    "processorFields": [
                        {
                            "keyword": "1111",
                            "value": "lastDigits",
                            "displayOn": "none"
                        }
                    ],
                    "dispersion": null,
                    "agreement": null,
                    "agreementType": null,
                    "discount": {
                        "base": 3000,
                        "code": "17934",
                        "type": "FRANCHISE",
                        "amount": 1000
                    },
                    "subscription": null
                }]
              }
            }
```
            ```json {{ title: '200: Saldo de la factura o monto mínimo' }}
            {
                "status": {
                    "status": "OK",
                    "reason": "00",
                    "description": "La petición se ha procesado correctamente",
                    "date":"2023-06-21T09:56:06-05:00"
                },
                "data": {
                    "id": "328eb09a-363f-48a6-a16e-51c5a58b89ec",
                    "status": "ACTIVE",
                    "chargeType": "STATEMENT_BALANCE", || MINIMUM_PAYMENT
                    "reference": "12345",
                    "description": "Ejemplo de descripción",
                    "ipAddress": "127.0.0.1",
                    "acceptedAt": "2021-09-24T10:02:17-05:00",
                    "createdAt": "2021-09-24T10:02:17-05:00",
                    "payer": {
                        "document": "911111111",
                        "documentType": "CC",
                        "name": "john",
                        "surname": "doe",
                        "email": "john@doe.com",
                        "mobile": "+573111111111"
                    },
                    "recurring": {
                        "periodicity": "D",
                        "interval": "1",
                        "nextPayment": "2025-08-24",
                        "maxPeriods": 1,
                        "dueDate ": "2025-12-24",
                        "notificationUrl ": "https://checkout.placetopay.com"
                    },
                    "additional": {
                        "franchise": "visa",
                        "lastDigits": "0008",
                        "bin": "411111",
                        "processUrl": "https://checkout-co.placetopay.com/session/1/cc9b8690b1f7228c78b759ce27d7e80a"
                    },
                    "transactions": []
                }
            }
            ```
```json {{ title: '200: Monto mínimo + monto fijo adicional' }}
            {
                "status": {
                    "status": "OK",
                    "reason": "00",
                    "description": "La petición se ha procesado correctamente",
                    "date":"2023-06-21T09:56:06-05:00"
                },
                "data": {
                    "id": "328eb09a-363f-48a6-a16e-51c5a58b89ec",
                    "status": "ACTIVE",
                    "chargeType": "FIXED_MINIMUM"
                    "reference": "12345",
                    "description": "Ejemplo de descripción",
                    "amount": {
                        "currency": "USD",
                        "total": 1
                    },
                    "ipAddress": "127.0.0.1",
                    "acceptedAt": "2021-09-24T10:02:17-05:00",
                    "createdAt": "2021-09-24T10:02:17-05:00",
                    "payer": {
                        "document": "911111111",
                        "documentType": "CC",
                        "name": "john",
                        "surname": "doe",
                        "email": "john@doe.com",
                        "mobile": "+573111111111"
                    },
                    "recurring": {
                        "periodicity": "D",
                        "interval": "1",
                        "nextPayment": "2025-08-24",
                        "maxPeriods": 1,
                        "dueDate ": "2025-12-24",
                        "notificationUrl ": "https://checkout.placetopay.com"
                    },
                    "additional": {
                        "franchise": "visa",
                        "lastDigits": "0008",
                        "bin": "411111",
                        "processUrl": "https://checkout-co.placetopay.com/session/1/cc9b8690b1f7228c78b759ce27d7e80a"
                    },
                    "transactions": []
                }
            }
            ```
            ```json {{ title: '400: Respuesta fallida' }}
            {
                "status": {
                    "status": "FAILED",
                    "reason": "BR",
                    "message": "El campo id es obligatorio.",
                    "date":"2023-06-21T09:56:06-05:00"
                }
            }
            ```

            ```json {{ title: '404: Recurso no encontrado' }}
            {
                "status": {
                    "status": "FAILED",
                    "reason": "BR",
                    "message": "No existen coincidencias.",
                    "date":"2023-06-21T09:56:06-05:00"
                }
            }
            ```

            ```json {{ title: '401: Autenticación fallida' }}
            {
                "status": {
                    "status": "FAILED",
                    "reason": "401",
                    "message": "la autenticación no contiene todos los parámetros requeridos (login, tranKey, seed, nonce)",
                    "date": "2021-09-21T09:34:48-05:00"
               }
            }
            ```
        </CodeGroup>
    </Col>
</Row>

